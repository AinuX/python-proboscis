<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Proboscis &mdash; proboscis v1.0 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="proboscis v1.0 documentation" href="#" />
    <link rel="next" title="Usage" href="usage.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="N">next</a> |</li>
        <li><a href="#">proboscis v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="proboscis">
<h1>Proboscis<a class="headerlink" href="#proboscis" title="Permalink to this headline">¶</a></h1>
<p>An extension for Nose that facilitates higher level testing.</p>
<p>Changes how test classes are discovered by forcing them to register via
decorators which contain useful metadata such as what groups they are in,
whether or not they have dependencies on other tests, and if they should be
ignored.</p>
<p>Proboscis sorts all registered tests into the desired run order then
constructs a test suite which it passes to Nose.  It can also filter this list
so that it&#8217;s possible to specify which groups of tests you wish to run without
passing in the exact test classes.  At runtime, tests which depend on other
tests that have failed are automatically marked as skipped.</p>
<p>Much of this functionality was &#8220;inspired&#8221; by TestNG.  If you&#8217;re coming from
that framework, the main features Proboscis currently offers are dependent test
ordering (currently limited to the class level) and the ability to arrange your
tests into groups independent of the structure of their modules or packages.</p>
<p>With Proboscis it&#8217;s possible to write tests which depend on a web service
(or some other dependency you&#8217;d like to only initialize once) like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.tests&quot;</span><span class="p">],</span> <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialization&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">WhenConnectingAsAdmin</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_change_profile_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;default.jpg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_profile_image</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_profile_image</span><span class="p">(</span><span class="s">&quot;spam.jpg&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;spam.jpg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_profile_image</span><span class="p">())</span>
</pre></div>
</div>
<p>Then write the code to start and cleanly shut down that web service in any other
module as a first class test itself:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialization&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">StartWebServer</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Start up web server, then issues a connect.</span>
        <span class="n">mymodule</span><span class="o">.</span><span class="n">start_web_server</span><span class="p">()</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">)</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.shutdown&quot;</span><span class="p">],</span> <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.tests&quot;</span><span class="p">],</span> \
      <span class="n">never_skip</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">StopService</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">:</span>
            <span class="n">mymodule</span><span class="o">.</span><span class="n">stop_web_server</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">())</span>
</pre></div>
</div>
<p>Using Proboscis you can rest assured the tests will execute in the desired
order even if you add more test classes, change their name, or move them
to different modules.  Additionally, if test depends on another one which fails
it will be automatically skipped.</p>
</div>
<div class="section" id="downloads">
<h1>Downloads<a class="headerlink" href="#downloads" title="Permalink to this headline">¶</a></h1>
<div class="section" id="source">
<h2>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>The source can be found at <a class="reference external" href="https://github.com/rackspace/python-proboscis/">GitHub</a>.</p>
</div>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="writing-tests">
<h2>Writing Tests<a class="headerlink" href="#writing-tests" title="Permalink to this headline">¶</a></h2>
<p>Proboscis tests are unittest.TestCase classes decorated with
proboscis.test.</p>
<p>In fact, true unit tests are indistinguishable from Nose tests except that they
require the test decorator.</p>
<p>Here&#8217;s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
<span class="kn">from</span> <span class="nn">proboscis</span> <span class="kn">import</span> <span class="n">test</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;unit&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">TestReverseString</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_reversal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">original</span> <span class="o">=</span> <span class="s">&quot;hello&quot;</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s">&quot;olleh&quot;</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
</pre></div>
</div>
<p>Proboscis is more useful for higher level tests which may have dependencies on
each other or need to run in a guaranteed order.</p>
<p>Nose can order tests based on their placement and name but the effect is
difficult to maintain, especially when working with multiple modules.
Additionally, if one test performs some sort of initialization to produce a
state required by other tests and fails, the dependent tests run despite
having no chance of succeeding. These additional failures pollute the results
making the true problem harder to see.</p>
<p>In Proboscis, if one tests depends on another which fails, the
dependent test raises SkipTest automatically, making it easier to track down
the real problem.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
<span class="kn">from</span> <span class="nn">proboscis</span> <span class="kn">import</span> <span class="n">register</span>
<span class="kn">from</span> <span class="nn">proboscis</span> <span class="kn">import</span> <span class="n">test</span>

<span class="n">service_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;user_name&quot;</span><span class="p">:</span><span class="s">&quot;bob&quot;</span><span class="p">,</span>
    <span class="s">&quot;pass_word&quot;</span><span class="p">:</span><span class="s">&quot;pass_word&quot;</span>
<span class="p">}</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialization&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">CreateDatabase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a local database.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">test_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mymodule</span><span class="o">.</span><span class="n">create_database</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">mymodule</span><span class="o">.</span><span class="n">tables_exist</span><span class="p">())</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialization&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">StartWebServer</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Starts the web server.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">test_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Start up web server then issue a connect to make sure its up.</span>
        <span class="n">mymodule</span><span class="o">.</span><span class="n">start_web_server</span><span class="p">()</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">)</span>

<span class="n">register</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.tests&quot;</span><span class="p">],</span>
         <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialization&quot;</span><span class="p">])</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.tests&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">WhenConnectingAsAdmin</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_has_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">check_credentials</span><span class="p">,</span>
                         <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="o">.</span><span class="n">ADMIN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_change_profile_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;default.jpg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_profile_image</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_profile_image</span><span class="p">(</span><span class="s">&quot;spam.jpg&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;spam.jpg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_profile_image</span><span class="p">())</span>

<span class="c"># Add more tests in the service.tests group here, or in any other file.</span>
<span class="c"># Then when we&#39;re finished...</span>

<span class="n">register</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.shutdown&quot;</span><span class="p">],</span>
         <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.tests&quot;</span><span class="p">])</span>
<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.shutdown&quot;</span><span class="p">],</span> <span class="n">never_skip</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">StopService</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">ServiceClient</span><span class="p">(</span><span class="n">service_config</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">:</span>
            <span class="n">mymodule</span><span class="o">.</span><span class="n">stop_web_server</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">service_is_up</span><span class="p">())</span>


<span class="nd">@test</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.shutdown&quot;</span><span class="p">],</span> <span class="n">never_skip</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DestroyDatabase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mymodule</span><span class="o">.</span><span class="n">destroy_database</span><span class="p">()</span>
</pre></div>
</div>
<p>This code models an end user hitting a web service to change his profile
pictures.</p>
<p>To do this without mocking anything, it has to set up a local
database instance and  start the actual web service.  This is done in the
group marked &#8220;service.initialization.&#8221; Because the &#8220;service.tests&#8221; group
depends on it, those tests can assume that the services are up.</p>
<p>Additionally, if the initialization phase fails somehow it will
be represented like any other test, and all tests in the integration.tests
group will be marked as &#8220;skip&#8221; instead of fail.</p>
<p>When the tests are finished the group &#8220;integration.shutdown&#8221; runs.  The two
test classes in this group are marked as  &#8220;never_skip&#8221;, which prevents them
from not running if anything in the &#8220;integration.tests&#8221; group fails but still
causes them to run afterwards.</p>
<p>Of course, whether or not its worth it to start the real database and the web
service or if the tests instead should use mocks depends on the particulars of
the application and the religion of the test author.</p>
</div>
<div class="section" id="running-proboscis">
<h2>Running Proboscis<a class="headerlink" href="#running-proboscis" title="Permalink to this headline">¶</a></h2>
<p>Proboscis doesn’t have a standard script and can&#8217;t automatically load modules
in a directory, so you have to import them programmatically manually before passing control to Proboscis.</p>
<p>Proboscis requires test modules to be imported manually and any project
using it will need to write its own main test script.  Don&#8217;t worry though
because this is pretty easy.  Such a script is also normally a good place
to specify additional bits of configuration or organization.</p>
<p>Here&#8217;s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">proboscis</span> <span class="kn">import</span> <span class="n">register</span>
<span class="kn">from</span> <span class="nn">proboscis</span> <span class="kn">import</span> <span class="n">TestProgram</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c"># Import all modules which have been decorated with @test.</span>
    <span class="kn">from</span> <span class="nn">tests</span> <span class="kn">import</span> <span class="n">util_test</span>
    <span class="kn">from</span> <span class="nn">tests</span> <span class="kn">import</span> <span class="n">service_tests</span>

    <span class="c"># Now create some groups of groups.</span>
    <span class="n">register</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;fast&quot;</span><span class="p">],</span> <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;unit&quot;</span><span class="p">])</span>
    <span class="n">register</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;integration&quot;</span><span class="p">],</span>
             <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;service.initialize&quot;</span><span class="p">,</span>
                                <span class="s">&quot;service.tests&quot;</span><span class="p">,</span>
                                <span class="s">&quot;service.shutdown&quot;</span><span class="p">])</span>
    <span class="n">register</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;slow&quot;</span><span class="p">],</span>
             <span class="n">depends_on_groups</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;fast&quot;</span><span class="p">,</span> <span class="s">&quot;integration&quot;</span><span class="p">])</span>

    <span class="c"># Run Proboscis and exit.</span>
    <span class="n">TestProgram</span><span class="p">()</span>
</pre></div>
</div>
<p>The class proboscis.TestProgram passes control to nose.core.TestProgram
(which passes control to the unittest module) and exits the program.
By default, proboscis.TestProgram reads arguments from sys.argv.
Assuming this script was named runtests.py, you&#8217;d could run all the tests
using this command:</p>
<div class="highlight-bash"><div class="highlight"><pre>python runtests.py
</pre></div>
</div>
<p>...run just the unit tests with this one:</p>
<div class="highlight-bash"><div class="highlight"><pre>python runtests.py --group<span class="o">=</span>unit
</pre></div>
</div>
<p>...or run all the slow tests:</p>
<div class="highlight-bash"><div class="highlight"><pre>python runtests.py --group<span class="o">=</span>slow
</pre></div>
</div>
<p>You can see how Proboscis will order the tests using the &#8211;show-plan option.</p>
<div class="highlight-bash"><div class="highlight"><pre>python runtests.py --groups<span class="o">=</span>slow --show-plan
</pre></div>
</div>
</div>
</div>
<div class="section" id="pydocs">
<h1>PyDocs<a class="headerlink" href="#pydocs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-proboscis">
<h2>proboscis<a class="headerlink" href="#module-proboscis" title="Permalink to this headline">¶</a></h2>
<p>Extension for Nose to facilitate higher level testing.</p>
<p>Changes how tests are discovered by forcing them to use a common decorator
which contains useful metadata such as whether or not they have dependencies
on other tests.  This allows larger processes or stories to be modelled and
run as tests.  Much of this functionality was &#8220;inspired&#8221; by TestNG.</p>
<dl class="class">
<dt id="proboscis.TestCaseInfo">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestCaseInfo</tt><big>(</big><em>groups=None</em>, <em>depends_on_classes=None</em>, <em>depends_on_groups=None</em>, <em>ignore=False</em>, <em>never_skip=False</em><big>)</big><a class="headerlink" href="#proboscis.TestCaseInfo" title="Permalink to this definition">¶</a></dt>
<dd>Represents metadata attached to a TestCase.</dd></dl>

<dl class="class">
<dt id="proboscis.TestEntry">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestEntry</tt><big>(</big><em>cls</em>, <em>info</em><big>)</big><a class="headerlink" href="#proboscis.TestEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>Represents a union of a TestCase and TestCaseInfo.</p>
<p>This class is also used to store status information, such as the dependent
TestEntry objects (discovered when this test is sorted) and any failure
in the dependencies of this test (used to raise SkipTest if needed).</p>
<dl class="method">
<dt id="proboscis.TestEntry.check_dependencies">
<tt class="descname">check_dependencies</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestEntry.check_dependencies" title="Permalink to this definition">¶</a></dt>
<dd>If a dependency has failed, SkipTest is raised.</dd></dl>

<dl class="method">
<dt id="proboscis.TestEntry.contains">
<tt class="descname">contains</tt><big>(</big><em>group_names</em>, <em>classes</em><big>)</big><a class="headerlink" href="#proboscis.TestEntry.contains" title="Permalink to this definition">¶</a></dt>
<dd>True if this belongs to any of the given groups or classes.</dd></dl>

<dl class="method">
<dt id="proboscis.TestEntry.fail_test">
<tt class="descname">fail_test</tt><big>(</big><em>dependency_failure=None</em><big>)</big><a class="headerlink" href="#proboscis.TestEntry.fail_test" title="Permalink to this definition">¶</a></dt>
<dd>Called when this entry fails to notify dependents.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestGraph">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestGraph</tt><big>(</big><em>registry</em><big>)</big><a class="headerlink" href="#proboscis.TestGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to sort the tests in a registry in the correct order.</p>
<p>As it sorts, it also adds dependent information to the TestEntries, which
means calling it twice messes stuff up.</p>
<dl class="method">
<dt id="proboscis.TestGraph.node_for_entry">
<tt class="descname">node_for_entry</tt><big>(</big><em>entry</em><big>)</big><a class="headerlink" href="#proboscis.TestGraph.node_for_entry" title="Permalink to this definition">¶</a></dt>
<dd>Finds the node attached to the given entry.</dd></dl>

<dl class="method">
<dt id="proboscis.TestGraph.nodes_for_class">
<tt class="descname">nodes_for_class</tt><big>(</big><em>cls</em><big>)</big><a class="headerlink" href="#proboscis.TestGraph.nodes_for_class" title="Permalink to this definition">¶</a></dt>
<dd>Returns nodes attached to the given class.</dd></dl>

<dl class="method">
<dt id="proboscis.TestGraph.nodes_for_group">
<tt class="descname">nodes_for_group</tt><big>(</big><em>group_name</em><big>)</big><a class="headerlink" href="#proboscis.TestGraph.nodes_for_group" title="Permalink to this definition">¶</a></dt>
<dd>Returns nodes attached to the given group.</dd></dl>

<dl class="method">
<dt id="proboscis.TestGraph.sort">
<tt class="descname">sort</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestGraph.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted list of entries.</p>
<p>Dismantles this graph&#8217;s list of nodes and adds dependent information
to the list of TestEntries (iow don&#8217;t call this twice).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestGroup">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestGroup</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#proboscis.TestGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>Represents a group of tests.</p>
<p>Think of test groups as tags on a blog.  A test case may belong to multiple
groups, and one group may have multiple test cases.</p>
<dl class="method">
<dt id="proboscis.TestGroup.add_entry">
<tt class="descname">add_entry</tt><big>(</big><em>entry</em><big>)</big><a class="headerlink" href="#proboscis.TestGroup.add_entry" title="Permalink to this definition">¶</a></dt>
<dd>Adds a TestEntry to this group.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestLoader">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestLoader</tt><big>(</big><em>wrapped_loader</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>Custom test loader for Proboscis.</p>
<p>Differs from the default unittest loader in that methods need only be
marked with the test decorator and any test whose dependencies have failed
throw SkipTest instead of running.</p>
<dl class="method">
<dt id="proboscis.TestLoader.getTestCaseNames">
<tt class="descname">getTestCaseNames</tt><big>(</big><em>testCaseClass</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.getTestCaseNames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestLoader.loadTestsFromModule">
<tt class="descname">loadTestsFromModule</tt><big>(</big><em>module</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.loadTestsFromModule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestLoader.loadTestsFromName">
<tt class="descname">loadTestsFromName</tt><big>(</big><em>name</em>, <em>module=None</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.loadTestsFromName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestLoader.loadTestsFromNames">
<tt class="descname">loadTestsFromNames</tt><big>(</big><em>names</em>, <em>module=None</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.loadTestsFromNames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestLoader.loadTestsFromTestCase">
<tt class="descname">loadTestsFromTestCase</tt><big>(</big><em>testCaseClass</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.loadTestsFromTestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestLoader.loadTestsFromTestEntry">
<tt class="descname">loadTestsFromTestEntry</tt><big>(</big><em>testEntry</em><big>)</big><a class="headerlink" href="#proboscis.TestLoader.loadTestsFromTestEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a test class in magic so it will skip on dependency failures.</p>
<p>Decorates the testEntry class&#8217;s setUp method to raise SkipTest if
tests this test was dependent on failed or had errors.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestNode">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestNode</tt><big>(</big><em>entry</em><big>)</big><a class="headerlink" href="#proboscis.TestNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of a TestEntry used in sorting.</p>
<dl class="method">
<dt id="proboscis.TestNode.add_dependency">
<tt class="descname">add_dependency</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#proboscis.TestNode.add_dependency" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a bidirectional link between this node and a dependency.</p>
<p>This also informs the dependency TestEntry of its dependent.  It is
intuitive to specify dependencies when writing tests, so we have
to wait until this phase to determine the dependents of the TestEntry.</p>
</dd></dl>

<dl class="attribute">
<dt id="proboscis.TestNode.has_no_dependencies">
<tt class="descname">has_no_dependencies</tt><a class="headerlink" href="#proboscis.TestNode.has_no_dependencies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestNode.pop_dependent">
<tt class="descname">pop_dependent</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestNode.pop_dependent" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes and returns a dependent from this nodes dependent list.</p>
<p>This act of destruction is one reason why this second representation
of a TestEntry is necessary.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestProgram">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestProgram</tt><big>(</big><em>registry=&lt;proboscis.TestRegistry object at 0x361d750&gt;</em>, <em>classes=None</em>, <em>groups=None</em>, <em>testLoader=None</em>, <em>config=None</em>, <em>plugins=None</em>, <em>env=None</em>, <em>testRunner=None</em>, <em>argv=</em><span class="optional">[</span>, <em>'setup.py'</em>, <em>'build_sphinx'</em><span class="optional">]</span>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#proboscis.TestProgram" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">nose.core.TestProgram</span></tt></p>
<p>The entry point of Proboscis.</p>
<p>Creates the test suite and loaders before handing things off to Nose which
runs as usual.</p>
<dl class="method">
<dt id="proboscis.TestProgram.add_test_case">
<tt class="descname">add_test_case</tt><big>(</big><em>entry</em><big>)</big><a class="headerlink" href="#proboscis.TestProgram.add_test_case" title="Permalink to this definition">¶</a></dt>
<dd>Creates and adds a standard Nose test case from a TestEntry.</dd></dl>

<dl class="method">
<dt id="proboscis.TestProgram.extract_groups_from_argv">
<tt class="descname">extract_groups_from_argv</tt><big>(</big><em>argv</em>, <em>groups</em><big>)</big><a class="headerlink" href="#proboscis.TestProgram.extract_groups_from_argv" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the group argument if it exists and extract it.</p>
<p>Nose will fail if we pass it an argument it doesn&#8217;t know of, so this
function modifies argv.</p>
</dd></dl>

<dl class="method">
<dt id="proboscis.TestProgram.show_plan">
<tt class="descname">show_plan</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestProgram.show_plan" title="Permalink to this definition">¶</a></dt>
<dd>Prints information on test entries and the order they will run.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestRegistry">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestRegistry</tt><a class="headerlink" href="#proboscis.TestRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>Stores test information.</p>
<dl class="method">
<dt id="proboscis.TestRegistry.ensure_group_exists">
<tt class="descname">ensure_group_exists</tt><big>(</big><em>group_name</em><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.ensure_group_exists" title="Permalink to this definition">¶</a></dt>
<dd>Adds the group if it does not exist.</dd></dl>

<dl class="method">
<dt id="proboscis.TestRegistry.filter_test_list">
<tt class="descname">filter_test_list</tt><big>(</big><em>group_names=None</em>, <em>classes=None</em><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.filter_test_list" title="Permalink to this definition">¶</a></dt>
<dd>Whittles down test list to hose matching criteria.</dd></dl>

<dl class="method">
<dt id="proboscis.TestRegistry.get_group">
<tt class="descname">get_group</tt><big>(</big><em>group_name</em><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.get_group" title="Permalink to this definition">¶</a></dt>
<dd>Finds a group by name.</dd></dl>

<dl class="method">
<dt id="proboscis.TestRegistry.get_sorted_tests">
<tt class="descname">get_sorted_tests</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.get_sorted_tests" title="Permalink to this definition">¶</a></dt>
<dd>Sorts and returns the test list.</dd></dl>

<dl class="method">
<dt id="proboscis.TestRegistry.register">
<tt class="descname">register</tt><big>(</big><em>cls=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.register" title="Permalink to this definition">¶</a></dt>
<dd>Registers a test entry.</dd></dl>

<dl class="method">
<dt id="proboscis.TestRegistry.sort">
<tt class="descname">sort</tt><big>(</big><big>)</big><a class="headerlink" href="#proboscis.TestRegistry.sort" title="Permalink to this definition">¶</a></dt>
<dd>Sorts all registered test entries.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="proboscis.TestResult">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestResult</tt><big>(</big><em>stream</em>, <em>descriptions</em>, <em>verbosity</em>, <em>config=None</em>, <em>errorClasses=None</em><big>)</big><a class="headerlink" href="#proboscis.TestResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="proboscis.TestResultListener" class="reference internal" href="#proboscis.TestResultListener"><tt class="xref docutils literal"><span class="pre">proboscis.TestResultListener</span></tt></a>, <tt class="xref docutils literal"><span class="pre">nose.result.TextTestResult</span></tt></p>
<p>Mixes TestResultListener with nose&#8217;s TextTestResult class.</p>
</dd></dl>

<dl class="class">
<dt id="proboscis.TestResultListener">
<em class="property">class </em><tt class="descclassname">proboscis.</tt><tt class="descname">TestResultListener</tt><a class="headerlink" href="#proboscis.TestResultListener" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements methods of TestResult to be informed of test failures.</p>
<dl class="method">
<dt id="proboscis.TestResultListener.addError">
<tt class="descname">addError</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="headerlink" href="#proboscis.TestResultListener.addError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestResultListener.addFailure">
<tt class="descname">addFailure</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="headerlink" href="#proboscis.TestResultListener.addFailure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="proboscis.TestResultListener.onError">
<tt class="descname">onError</tt><big>(</big><em>test</em><big>)</big><a class="headerlink" href="#proboscis.TestResultListener.onError" title="Permalink to this definition">¶</a></dt>
<dd>Notify a test entry and its dependents of failure.</dd></dl>

</dd></dl>

<dl class="function">
<dt id="proboscis.register">
<tt class="descclassname">proboscis.</tt><tt class="descname">register</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#proboscis.register" title="Permalink to this definition">¶</a></dt>
<dd>Registers a test in proboscis&#8217;s default registry.</dd></dl>

<dl class="function">
<dt id="proboscis.test">
<tt class="descclassname">proboscis.</tt><tt class="descname">test</tt><big>(</big><em>cls=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#proboscis.test" title="Permalink to this definition">¶</a></dt>
<dd>Put this on a test class to cause Proboscis to run it.</dd></dl>

<dl class="function">
<dt id="proboscis.test_runner_cls">
<tt class="descclassname">proboscis.</tt><tt class="descname">test_runner_cls</tt><big>(</big><em>wrapped_cls</em>, <em>cls_name</em><big>)</big><a class="headerlink" href="#proboscis.test_runner_cls" title="Permalink to this definition">¶</a></dt>
<dd>Creates a test runner class which uses Proboscis TestResult.</dd></dl>

</div>
<div class="section" id="module-proboscis.decorators">
<h2>proboscis.decorators<a class="headerlink" href="#module-proboscis.decorators" title="Permalink to this headline">¶</a></h2>
<p>Decorators useful to the tests.</p>
<dl class="exception">
<dt id="proboscis.decorators.TimeoutError">
<em class="property">exception </em><tt class="descclassname">proboscis.decorators.</tt><tt class="descname">TimeoutError</tt><a class="headerlink" href="#proboscis.decorators.TimeoutError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">exceptions.RuntimeError</span></tt></p>
<p>Thrown when a method has exceeded the time allowed.</p>
</dd></dl>

<dl class="function">
<dt id="proboscis.decorators.decorate_class">
<tt class="descclassname">proboscis.decorators.</tt><tt class="descname">decorate_class</tt><big>(</big><em>setUp_method=None</em>, <em>tearDown_method=None</em><big>)</big><a class="headerlink" href="#proboscis.decorators.decorate_class" title="Permalink to this definition">¶</a></dt>
<dd>Inserts method calls in the setUp / tearDown methods of a class.</dd></dl>

<dl class="function">
<dt id="proboscis.decorators.expect_exception">
<tt class="descclassname">proboscis.decorators.</tt><tt class="descname">expect_exception</tt><big>(</big><em>exception_type</em><big>)</big><a class="headerlink" href="#proboscis.decorators.expect_exception" title="Permalink to this definition">¶</a></dt>
<dd>Decorates a test method to show it expects an exception to be raised.</dd></dl>

<dl class="function">
<dt id="proboscis.decorators.time_out">
<tt class="descclassname">proboscis.decorators.</tt><tt class="descname">time_out</tt><big>(</big><em>time</em><big>)</big><a class="headerlink" href="#proboscis.decorators.time_out" title="Permalink to this definition">¶</a></dt>
<dd>Raises TimeoutError if the decorated method does not finish in time.</dd></dl>

<ul>
<li class="toctree-l1"><a class="reference external" href="usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference external" href="usage.html#writing-tests">Writing Tests</a></li>
<li class="toctree-l2"><a class="reference external" href="usage.html#running-proboscis">Running Proboscis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="download.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference external" href="download.html#source">Source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="pydocs.html">PyDocs</a><ul>
<li class="toctree-l2"><a class="reference external" href="pydocs.html#module-proboscis">proboscis</a></li>
<li class="toctree-l2"><a class="reference external" href="pydocs.html#module-proboscis.decorators">proboscis.decorators</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference external" href="modindex.html"><em>Module Index</em></a></li>
<li><a class="reference external" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="#">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Proboscis</a></li>
<li><a class="reference external" href="#downloads">Downloads</a><ul>
<li><a class="reference external" href="#source">Source</a></li>
</ul>
</li>
<li><a class="reference external" href="#usage">Usage</a><ul>
<li><a class="reference external" href="#writing-tests">Writing Tests</a></li>
<li><a class="reference external" href="#running-proboscis">Running Proboscis</a></li>
</ul>
</li>
<li><a class="reference external" href="#pydocs">PyDocs</a><ul>
<li><a class="reference external" href="#module-proboscis">proboscis</a></li>
<li><a class="reference external" href="#module-proboscis.decorators">proboscis.decorators</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#indices-and-tables">Indices and tables</a></li>
</ul>

            <h4>Next topic</h4>
            <p class="topless"><a href="usage.html"
                                  title="next chapter">Usage</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >next</a> |</li>
        <li><a href="#">proboscis v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Rackspace.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.6.
    </div>
  </body>
</html>